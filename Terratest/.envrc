###### VAULT LOGIN #####
export VAULT_ADDR=${{ secrets.VAULT_ADDR }}
export VAULT_ROLE_ID=${{ secrets.VAULT_ROLE_ID }}
export VAULT_SECRET_ID=${{ secrets.VAULT_SECRET_ID }}
export VAULT_TOKEN=$(vault write -field=token ${{ secrets.VAULT_TOKEN_PATH }} role_id=$VAULT_ROLE_ID secret_id=$VAULT_SECRET_ID) || true

#### OTC CREDENTIALS #####
export OS_DOMAIN_NAME=${{ secrets.OS_DOMAIN_NAME }}
export OS_ACCESS_KEY=$(vault kv get --field access_key ${{ secrets.OS_KEY_PATH }})
export OS_SECRET_KEY=$(vault kv get --field secret_key ${{ secrets.OS_KEY_PATH }})

export TF_VAR_region="eu-de"
export OS_AUTH_URL="https://iam.${TF_VAR_region}.otc.t-systems.com/v3"

export AWS_ACCESS_KEY_ID=$OS_ACCESS_KEY
export AWS_SECRET_ACCESS_KEY=$OS_SECRET_KEY

##### PROJECT CONFIGURATION #####
#Current Context you are working on can be customer name or cloud name etc.
export TF_VAR_domain_name="terratest.iits.tech"
export TF_VAR_stage="test"
export OS_PROJECT_NAME=$TF_VAR_region"_terratest"

#### TERRAFORM LOCAL PLUGIN CACHING #####
mkdir -p ${HOME}/Terraform/plugins
export TF_PLUGIN_CACHE_DIR=${HOME}/Terraform/plugins